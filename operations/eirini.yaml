---
- type: replace
  path: /releases?/-
  value:
    name: eirini-errand
    version: latest

- type: replace
  path: /instance_groups?/-
  value:
    name: eirini-errand
    instances: 1
    stemcell: default
    update:
      serial: true
    vm_type: minimal
    azs:
    - z1
    networks:
    - name: default
    lifecycle: errand
    jobs:
    - name: install_eirini
      release: eirini-errand
      properties:
        bpm:
          enabled: true
        kube_config: "((kube_config_flatten))"
        ingress_endpoint: "((ingress_endpoint))"
        external_ips:
        - 158.176.123.28
        - 158.176.123.54
        - 158.176.123.40
        use_registry_ingress: "((use_registry_ingress))"
        registry_address: "((registry_address))"
        cc_internal_api: "((cc_internal_api))"
        cc_certs_secret_name: "((cc_certs_secret_name))"
        nats_address: "((nats_address))"
        doppler_address: "((doppler_address))"
        doppler-cert: "((doppler-cert))"
        doppler-cert-key: "((doppler-cert-key))"
        cc-server-crt: "((cc_public_tls.certificate))"
        cc-server-crt-key: "((cc_public_tls.private_key))"
        internal-ca-cert: "((cc_public_tls.ca))"
        eirini-client-crt: "((eirini-client-crt))"
        eirini-client-crt-key: "((eirini-client-crt-key))"


- type: replace
  path: /variables?/-
  value:
    name: cc_public_tls
    type: certificate
    options:
      ca: service_cf_internal_ca
      common_name: "api.((system_domain))"
      alternative_names:
      - "api.((system_domain))"
      - cloud-controller-ng.service.cf.internal



